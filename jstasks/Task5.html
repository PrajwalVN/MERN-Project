<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS Task5</title>
    <style>
      .error {
        border: 1px solid red;
      }
      .valid {
        border: 1px solid black;
      }
      .error-message {
        color: red;
        font-size: 0.9em;
      }
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <h2>Contact Form</h2>
    <form id="contactForm">
      <label for="name">Name:</label>
      <input type="text" id="name" class="error" />
      <span id="nameError" class="error-message">This is a required field</span>
      <br /><br />

      <label for="email">Email:</label>
      <input type="text" id="email" class="error" />
      <span id="emailError" class="error-message"
        >A valid email address is required (e.g., example@domain.com)</span
      >
      <br /><br />

      <label for="website">Website:</label>
      <input type="text" id="website" class="error" />
      <span id="websiteError" class="error-message"
        >A valid URL is required (starts with https://)</span
      >
      <br /><br />

      <label for="message">Message:</label>
      <textarea id="message" rows="4" class="error"></textarea>
      <span id="messageError" class="error-message"
        >This is a required field</span
      >
      <br /><br />

      <button type="submit">Submit</button>
    </form>

    <script type="text/javascript">
      document
        .getElementById("contactForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          validateForm();
        });

      document.getElementById("name").addEventListener("input", function () {
        validateName();
      });

      document.getElementById("email").addEventListener("input", function () {
        validateEmail();
      });

      document.getElementById("website").addEventListener("input", function () {
        validateWebsite();
      });

      document.getElementById("message").addEventListener("input", function () {
        validateMessage();
      });

      function validateName() {
        const name = document.getElementById("name").value;
        if (name.trim() === "") {
          document.getElementById("name").classList.add("error");
          document.getElementById("name").classList.remove("valid");
          document.getElementById("nameError").classList.remove("hidden");
        } else {
          document.getElementById("name").classList.remove("error");
          document.getElementById("name").classList.add("valid");
          document.getElementById("nameError").classList.add("hidden");
        }
      }

      function validateEmail() {
        const email = document.getElementById("email").value;
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(email)) {
          document.getElementById("email").classList.add("error");
          document.getElementById("email").classList.remove("valid");
          document.getElementById("emailError").classList.remove("hidden");
        } else {
          document.getElementById("email").classList.remove("error");
          document.getElementById("email").classList.add("valid");
          document.getElementById("emailError").classList.add("hidden");
        }
      }

      function validateWebsite() {
        const website = document.getElementById("website").value;
        if (!website.startsWith("https://")) {
          document.getElementById("website").classList.add("error");
          document.getElementById("website").classList.remove("valid");
          document.getElementById("websiteError").classList.remove("hidden");
        } else {
          document.getElementById("website").classList.remove("error");
          document.getElementById("website").classList.add("valid");
          document.getElementById("websiteError").classList.add("hidden");
        }
      }

      function validateMessage() {
        const message = document.getElementById("message").value;
        if (message.trim() === "") {
          document.getElementById("message").classList.add("error");
          document.getElementById("message").classList.remove("valid");
          document.getElementById("messageError").classList.remove("hidden");
        } else {
          document.getElementById("message").classList.remove("error");
          document.getElementById("message").classList.add("valid");
          document.getElementById("messageError").classList.add("hidden");
        }
      }

      function validateForm() {
        validateName();
        validateEmail();
        validateWebsite();
        validateMessage();

        const nameIsValid = !document
          .getElementById("name")
          .classList.contains("error");
        const emailIsValid = !document
          .getElementById("email")
          .classList.contains("error");
        const websiteIsValid = !document
          .getElementById("website")
          .classList.contains("error");
        const messageIsValid = !document
          .getElementById("message")
          .classList.contains("error");

        if (nameIsValid && emailIsValid && websiteIsValid && messageIsValid) {
          alert("Form submitted successfully!");
        }
      }
    </script>
  </body>
</html>
